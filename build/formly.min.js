!function(a,b,c){"use strict";angular.module("ambersive.formly",["formly","ngFileUpload","ambersive.helper"]),angular.module("ambersive.formly").config(["formlyConfigProvider",function(a){a.setType({name:"upload",templateUrl:"src/views/formly.upload.html",controller:"FormlyUploadCtrl as FormlyUpload"})}]),angular.module("ambersive.formly").provider("$formlyAdditionallySettings",[function(){var a="",b=function(b){b!==c&&(a=b)};return{setUploadUrl:b,$get:function(){return{uploadUrl:a}}}}]),angular.module("ambersive.formly").controller("FormlyUploadCtrl",["$rootScope","$scope","$log","Upload","$formlyAdditionallySettings",function(a,b,d,e,f){var g=this,h={};g.field="",g.init=function(a){h=a;var b="<button";b+=a.multiple===!0?' multiple ngf-select="FormlyUpload.uploadFiles($event,$files)"':' ngf-select="FormlyUpload.uploadFile($event,$file)"',b+=">"+a.button+"</button>",g.field=b},g.doUpload=function(a){var i=f.uploadUrl;h.url!==c&&(i=h.url),e.upload({url:i,data:{file:a,username:b.username}}).then(function(a){g.broadcast(a)},function(a){g.broadcast(a)},function(a){var b=parseInt(100*a.loaded/a.total);d.log("progress: "+b+"% "+a.config.data.file.name)})},g.uploadFile=function(a,b,c){a.preventDefault(),g.doUpload(b)},g.uploadFiles=function(a,b){if(a.preventDefault(),b&&b.length)for(var c=0;c<b.length;c++)g.doUpload(b[c]);else d.warn("no files detected")},g.broadcast=function(b){var d="";h.unique!==c&&""!==h.unqiue&&(d=h.unique),a.$broadcast("formlyUpload"+d.toUpperCase(),{result:b,settings:h,unique:d})}}]),angular.module("ambersive.formly").run(["$rootScope","$log",function(a,b){}])}(window,document,void 0),angular.module("ambersive.formly").run(["$templateCache",function(a){"use strict";a.put("src/views/formly.upload.html","<div class=formly_upload ng-init=FormlyUpload.init(to)><label class=control-label ng-if=to.label>{{to.label}}</label><div compile=FormlyUpload.field></div></div>")}]);